(this["webpackJsonpreact-app"]=this["webpackJsonpreact-app"]||[]).push([[0],[,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(0),c=n(1),r=n(6),s=n.n(r),o=(n(12),n(3)),i=(n(13),function(){return Object(a.jsx)("header",{className:"header",children:Object(a.jsx)("h1",{className:"header__title",children:"Photos App"})})}),u=n(2),l=n.n(u),d=n(4),m=function(){var e=Object(d.a)(l.a.mark((function e(t,n){var a,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat("https://tzfrontend.herokuapp.com").concat(t),n);case 2:if(a=e.sent){e.next=5;break}throw new Error("".concat(a.status," - ").concat(a.statusText));case 5:return e.next=7,a.json();case 7:return c=e.sent,e.abrupt("return",c);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),j=function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m("/images/");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=function(){var e=Object(d.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m("/images/".concat(t,"/"));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=(n(15),function(e){var t=e.setIsModalActive,n=e.setImgId,r=Object(c.useState)(null),s=Object(o.a)(r,2),i=s[0],u=s[1];Object(c.useEffect)((function(){j().then((function(e){u(e)}))}),[u]);return Object(a.jsx)("section",{className:"photos",children:Object(a.jsxs)("div",{className:"photos__container",children:[!i&&Object(a.jsx)("div",{className:"photos__error",children:"Loading... Please wait or try to reload."}),i&&Object(a.jsx)("div",{className:"photos__grid",children:i.map((function(e){return Object(a.jsx)("div",{className:"photo__card",children:Object(a.jsx)("img",{className:"photos__photo",src:e.src,alt:"nature",onClick:function(){return a=e.image_id,t(!0),void n(a);var a}})},e.image_id)}))})]})})}),f=function(){var e=Object(d.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m("/comments/".concat(t,"/"));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(d.a)(l.a.mark((function e(t,n,a){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(c={name:t,description:n,image_id:a},m("/comments/add/",{method:"POST",headers:{"Content-type":"application/json; charset=UTF-8"},body:JSON.stringify(c)})));case 1:case"end":return e.stop()}var c}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),O=(n(16),function(e){var t=e.isModalActive,n=e.setIsModalActive,r=e.imgId,s=Object(c.useState)(""),i=Object(o.a)(s,2),u=i[0],m=i[1],j=Object(c.useState)([]),p=Object(o.a)(j,2),O=p[0],x=p[1],_=Object(c.useState)(""),v=Object(o.a)(_,2),N=v[0],y=v[1],g=Object(c.useState)(""),w=Object(o.a)(g,2),k=w[0],S=w[1],I=Object(c.useState)(!1),A=Object(o.a)(I,2),E=A[0],M=A[1],C=Object(c.useState)(!1),F=Object(o.a)(C,2),J=F[0],P=F[1],T=function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(r);case 2:(t=e.sent).detail?x([]):x(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){r&&(t&&(document.body.style.overflow="hidden"),t||(document.body.style.overflow="visible"),b(r).then((function(e){m(e)})),T())}),[t,r,m]);var z=function(e){var t=e.target,n=t.name,a=t.value;"name"===n?y(a):"comment"===n&&S(a)};return Object(a.jsx)(a.Fragment,{children:t&&Object(a.jsx)("div",{className:"modal",children:Object(a.jsxs)("div",{className:"modal__container",children:[Object(a.jsxs)("div",{className:"modal__info",children:[Object(a.jsx)("img",{className:"modal__photo",src:u.src,alt:"nature"}),Object(a.jsxs)("form",{className:"modal__form",onSubmit:function(e){e.preventDefault(),N||M(!0),k||P(!0),N&&k&&(h(N,k,r),T(),y(""),S(""),M(!1),P(!1))},children:[Object(a.jsxs)("label",{htmlFor:"name",className:"modal__label",children:[Object(a.jsx)("input",{className:"modal__input",type:"text",id:"name",name:"name",value:N,placeholder:"\u0412\u0430\u0448\u0435 \u0438\u043c\u044f",onChange:z}),E&&Object(a.jsx)("p",{className:"modal__error",children:"Empty field"})]}),Object(a.jsxs)("label",{htmlFor:"comment",className:"modal__label",children:[Object(a.jsx)("input",{className:"modal__input",type:"text",id:"comment",name:"comment",value:k,placeholder:"\u0412\u0430\u0448 \u043a\u043e\u043c\u043c\u0435\u0442\u0430\u0440\u0438\u0439",onChange:z}),J&&Object(a.jsx)("p",{className:"modal__error",children:"Empty field"})]}),Object(a.jsx)("button",{className:"modal__button",type:"submit",children:"\u041e\u0441\u0442\u0430\u0432\u0438\u0442\u044c \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439"})]})]}),O&&Object(a.jsx)("div",{className:"modal__comments",children:O.map((function(e){return Object(a.jsxs)("div",{className:"modal__comment",children:[Object(a.jsx)("p",{className:"modal__name",children:e.name}),Object(a.jsx)("p",{className:"modal__text",children:e.description})]},e.id)}))}),Object(a.jsxs)("button",{className:"modal__close",type:"button",onClick:function(){n(!t)},children:[Object(a.jsx)("div",{className:"modal__line-right"}),Object(a.jsx)("div",{className:"modal__line-left"})]})]})})})}),x=(n(17),function(){return Object(a.jsx)("footer",{className:"footer",children:"\xa9 2018 - 2019"})}),_=(n(18),function(){var e=Object(c.useState)(!1),t=Object(o.a)(e,2),n=t[0],r=t[1],s=Object(c.useState)(0),u=Object(o.a)(s,2),l=u[0],d=u[1];return Object(a.jsx)("div",{className:"content",children:Object(a.jsxs)("div",{className:"content__container",children:[Object(a.jsx)(i,{}),Object(a.jsx)(p,{setIsModalActive:r,setImgId:d}),Object(a.jsx)(O,{isModalActive:n,imgId:l,setIsModalActive:r}),Object(a.jsx)(x,{})]})})});s.a.render(Object(a.jsx)(_,{}),document.getElementById("root"))}],[[19,1,2]]]);
//# sourceMappingURL=main.2d31f79e.chunk.js.map